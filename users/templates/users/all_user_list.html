{% extends 'includes/base.html' %}
{% load static %}

{% block post_CSS %}
<link rel="stylesheet" href="{% static 'users/css/users.css' %}">
{% endblock %}

{% block content %}
<section class="light-page screen-height">
    <div class="nav-top-padding"></div>
    <div class="container-fluid w-100 m-auto py-5 centered-col-large-page">
        <h1 class="header-underline-after">Discover New Freelancers</h1>
        <div class="search-row py-5">
            <div class="card search-box-card muted">
                <h2>Filter your search</h2>
                <form action="{% url 'all_users' %}" id="user_search_form" method="POST">{%csrf_token%}
                    <div class="fieldset">
                        <label for="industry">Industry</label>
                        <input type="text" name="user_search" id="user_search" placeholder="Search by keyword">
                    </div>
                    <div class="input-row d-flex justify-content-between">
                        <div class="fieldset" id="industry_search">
                            <label for="industry">Industry</label>
                            <div id="ind-select"></div>
                        </div>
                        <div class="fieldset">
                            <label for="location_search">Location</label>
                            <input type="text" name="location_search" id="location_search"
                                placeholder="Filter by location">
                        </div>
                    </div>
                    <div class="fixed-40">
                    <button type="submit" class="btn primary-btn">Filter Results</button>
                </div>
                </form>
            </div>
        </div>
    </div>

    <div class="page-results flex-wrap">
        {% for user in users %}
        <div class="card user-card">
            <div class="d-flex flex-wrap">
                <div class="prf-img-preview">
                    <img class="prf-img-preview" src="/media/{{user.profile_image}}"
                        alt="{{user.first_name}} {{user.last_name}}'s profile image"
                        onload="specImageOrientation(this);">
                </div>
                <!-- TODO remove default testing input -->
                <div class="user-details-mast">
                    <h3>{{user.first_name}} {{user.last_name}}</h3>
                    <p>{{user.role}}Project Manager</p>
                    <p>{{user.location}}London</p>
                    <span class="user-ind-pill green">{{user.location}}Events Management</span>
                </div>
            </div>
            <hr>
            <div class="user-details-bottom">
                <p class="user-skills">{{user.skills}}</p>
                <p>{{user.about}} Lorem ipsum dolor, sit amet consectetur adipisicing elit. Odit voluptatibus eos
                    veritatis hic nisi possimus, pariatur architecto velit illum repellendus tempore eligendi magni
                    amet laudantium, quam exercitationem totam saepe repudiandae? </p>
            </div>
            <div class="user-cta d-flex flex-wrap justify-content-between mt-3">
                <button class="btn primary-btn px-3 py-1 m-1">Send Connection Request</button>
                <button class="btn primary-btn-outline-color px-3 py-1 m-1">Remove Connection</button>
            </div>
        </div>
        {% endfor %}
    </div>
    </div>
</section>

{{ industries|json_script:"all_inds" }}
<script src="{% static 'users/js/users.js' %}" type="text/javascript"></script>


{% endblock %}